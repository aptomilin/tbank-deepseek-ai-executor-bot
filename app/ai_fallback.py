"""
Fallback AI responses when external AI services are unavailable
"""
import logging

logger = logging.getLogger(__name__)

class FallbackAI:
    """Fallback AI with predefined investment responses"""
    
    async def generate_response(self, prompt: str, context: str = "") -> str:
        """Generate fallback response for investment questions"""
        prompt_lower = prompt.lower()
        
        # Investment portfolio analysis
        if any(word in prompt_lower for word in ['–ø–æ—Ä—Ç—Ñ–µ–ª—å', '–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ', '–∏–Ω–≤–µ—Å—Ç–∏—Ü']):
            return """
üìä **–ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è:**

üíº **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
‚Ä¢ –ê–∫—Ü–∏–∏ —Ä–æ—Å—Ç–∞: 50-60%
‚Ä¢ –û–±–ª–∏–≥–∞—Ü–∏–∏: 20-30%
‚Ä¢ ETF: 10-20%
‚Ä¢ –î–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞: 5-10%

üéØ **–°–æ–≤–µ—Ç—ã:**
1. –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º
2. –î–æ–±–∞–≤—å—Ç–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –∞–∫—Ç–∏–≤—ã
3. –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å
4. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Å–≤–æ—é —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ —Ä–∏—Å–∫—É

üí° *–î–ª—è —Ç–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ AI-—Å–µ—Ä–≤–∏—Å*
            """
        
        # Stock market questions
        elif any(word in prompt_lower for word in ['–∞–∫—Ü–∏', '–∞–∫—Ü–∏—è', 'stock', '—Ä—ã–Ω–æ–∫']):
            return """
üìà **–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –∞–∫—Ü–∏–π:**

üîç **–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞:**
‚Ä¢ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ AI
‚Ä¢ –ó–µ–ª–µ–Ω–∞—è —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞  
‚Ä¢ –ó–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
‚Ä¢ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã

‚ö° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
‚Ä¢ –ò–∑—É—á–∞–π—Ç–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –≤–ª–æ–∂–µ–Ω–∏—è
‚Ä¢ –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ ETF –¥–ª—è —à–∏—Ä–æ–∫–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
‚Ä¢ –°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–∏–≤–∏–¥–µ–Ω–¥–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–æ–π

üìÖ *–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ AI*
            """
        
        # Bonds and fixed income
        elif any(word in prompt_lower for word in ['–æ–±–ª–∏–≥–∞—Ü', '–±–æ–Ω–¥', 'bond', '–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å']):
            return """
üí∞ **–û–±–ª–∏–≥–∞—Ü–∏–∏ –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å:**

üìä **–¢–∏–ø—ã –æ–±–ª–∏–≥–∞—Ü–∏–π:**
‚Ä¢ –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ (–û–§–ó) - –Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫
‚Ä¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ - —Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫
‚Ä¢ –ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ - —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ

üìà **–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å:**
‚Ä¢ –û–§–ó: 6-9% –≥–æ–¥–æ–≤—ã—Ö
‚Ä¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ: 8-12% –≥–æ–¥–æ–≤—ã—Ö
‚Ä¢ –í–∞–ª—é—Ç–Ω—ã–µ: 3-5% –≥–æ–¥–æ–≤—ã—Ö

üõ°Ô∏è **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚Ä¢ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –¥–æ—Ö–æ–¥
‚Ä¢ –ú–µ–Ω—å—à–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã

üí° *–î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω—É–∂–µ–Ω AI-–∞–Ω–∞–ª–∏–∑*
            """
        
        # General investment advice
        elif any(word in prompt_lower for word in ['—Å–æ–≤–µ—Ç', '—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü', '–∫—É–ø–∏—Ç—å', '–ø—Ä–æ–¥–∞—Ç—å']):
            return """
üéØ **–û–±—â–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**

1. **–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –Ω–µ –∫–ª–∞–¥–∏—Ç–µ –≤—Å–µ —è–π—Ü–∞ –≤ –æ–¥–Ω—É –∫–æ—Ä–∑–∏–Ω—É
2. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ—Å—Ç—å** - –∏–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—É
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å** - –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–∏—è –ª—É—á—à–µ —Ä–∞–∑–æ–≤—ã—Ö
4. **–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ** - –∏–∑—É—á–∞–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

üìä **–ù–∞—á–Ω–∏—Ç–µ —Å:**
‚Ä¢ ETF –Ω–∞ —à–∏—Ä–æ–∫–∏–π —Ä—ã–Ω–æ–∫
‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±–ª–∏–≥–∞—Ü–∏–∏
‚Ä¢ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∞–∫—Ü–∏—è–º

ü§ñ *–î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–≤–µ—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ AI-—Å–µ—Ä–≤–∏—Å*
            """
        
        # Market analysis
        elif any(word in prompt_lower for word in ['–∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞', 'market analysis', '—Ç—Ä–µ–Ω–¥']):
            return """
üåç **–û–±–∑–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä—ã–Ω–∫–æ–≤:**

üìÖ **–ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:**
‚Ä¢ –î–µ–Ω–µ–∂–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –¶–ë
‚Ä¢ –ú–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
‚Ä¢ –ì–µ–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
‚Ä¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

üîÆ **–û–±—â–∏–µ —Ç—Ä–µ–Ω–¥—ã:**
‚Ä¢ –†–æ—Å—Ç –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ AI –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º
‚Ä¢ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —Å—ã—Ä—å–µ–≤—ã—Ö —Ä—ã–Ω–∫–æ–≤
‚Ä¢ –ü–æ–∏—Å–∫ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –≤ —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏

üí° *–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ AI-—Å–µ—Ä–≤–∏—Å—É*
            """
        
        # Greetings and general questions
        elif any(word in prompt_lower for word in ['–ø—Ä–∏–≤–µ—Ç', 'hello', 'hi', '—Ö–∞–π']):
            return "ü§ñ –ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π —Å–æ–≤–µ—Ç–Ω–∏–∫. –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –æ–± –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö, –ø–æ—Ä—Ç—Ñ–µ–ª–µ –∏–ª–∏ —Ä—ã–Ω–∫–µ!"
        
        elif any(word in prompt_lower for word in ['–ø–æ–º–æ—â—å', 'help', '–∫–æ–º–∞–Ω–¥—ã']):
            return """
üìã **–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

üíº **–ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
üìà **–†—ã–Ω–æ–∫ –∞–∫—Ü–∏–π** - –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è  
üí∞ **–û–±–ª–∏–≥–∞—Ü–∏–∏** - –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏ —Ä–∏—Å–∫–∏
üéØ **–°–æ–≤–µ—Ç—ã** - –æ–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

üîß *–î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ AI-–∞–Ω–∞–ª–∏–∑–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã*
            """
        
        else:
            return f"""
ü§ñ **–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π —Å–æ–≤–µ—Ç–Ω–∏–∫:**

–í–∞—à –≤–æ–ø—Ä–æ—Å: "{prompt}"

üí° –Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Å:
‚Ä¢ –ê–Ω–∞–ª–∏–∑–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ—Ä—Ç—Ñ–µ–ª—è
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏  
‚Ä¢ –û–±—â–∏–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢ –û–±–∑–æ—Ä–æ–º —Ä—ã–Ω–∫–æ–≤ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

üîå *–î–ª—è —Ç–æ—á–Ω–æ–≥–æ AI-–∞–Ω–∞–ª–∏–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º*

üìû –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º—É –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç—É –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.
            """
    
    async def analyze_portfolio(self, portfolio_data: dict) -> str:
        """Analyze portfolio with fallback responses"""
        total_value = portfolio_data.get('total_value', 0)
        stocks_value = portfolio_data.get('stocks_value', 0)
        bonds_value = portfolio_data.get('bonds_value', 0)
        positions_count = portfolio_data.get('positions_count', 0)
        
        if total_value > 0:
            stocks_pct = (stocks_value / total_value) * 100
            bonds_pct = (bonds_value / total_value) * 100
            
            advice = self._get_portfolio_advice(stocks_pct, bonds_pct, positions_count)
            
            return f"""
üìä **–ê–Ω–∞–ª–∏–∑ –≤–∞—à–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è:**

üí∞ **–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:** {total_value:,} —Ä—É–±.
‚Ä¢ –ê–∫—Ü–∏–∏: {stocks_pct:.1f}% ({stocks_value:,} —Ä—É–±.)
‚Ä¢ –û–±–ª–∏–≥–∞—Ü–∏–∏: {bonds_pct:.1f}% ({bonds_value:,} —Ä—É–±.)
‚Ä¢ –ü–æ–∑–∏—Ü–∏–π: {positions_count}

üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
{advice}

üí° *–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ AI-–∞–Ω–∞–ª–∏–∑–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã*
            """
        else:
            return """
üíº **–ù–∞—á–∞–ª–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

üéØ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
1. –ù–∞—á–Ω–∏—Ç–µ —Å ETF –Ω–∞ —à–∏—Ä–æ–∫–∏–π —Ä—ã–Ω–æ–∫
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –æ–±–ª–∏–≥–∞—Ü–∏–∏
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∏–∑—É—á–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏
4. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ emergency fund

üìö **–ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
‚Ä¢ ETF –Ω–∞ –∏–Ω–¥–µ–∫—Å –ú–æ—Å–ë–∏—Ä–∂–∏
‚Ä¢ –û–§–ó —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ä–æ–∫–∞–º–∏
‚Ä¢ –î–æ–ª–ª–∞—Ä–æ–≤—ã–µ –æ–±–ª–∏–≥–∞—Ü–∏–∏

ü§ñ *–î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ AI-—Å–µ—Ä–≤–∏—Å*
            """
    
    def _get_portfolio_advice(self, stocks_pct: float, bonds_pct: float, positions_count: int) -> str:
        """Get portfolio advice based on allocation"""
        advice = []
        
        if stocks_pct > 70:
            advice.append("‚Ä¢ –°–Ω–∏–∑—å—Ç–µ –¥–æ–ª—é –∞–∫—Ü–∏–π –¥–æ 60% –¥–ª—è –±–∞–ª–∞–Ω—Å–∞")
        elif stocks_pct < 40:
            advice.append("‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ–ª—é –∞–∫—Ü–∏–π –¥–ª—è —Ä–æ—Å—Ç–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è")
        else:
            advice.append("‚Ä¢ –ë–∞–ª–∞–Ω—Å –∞–∫—Ü–∏–π/–æ–±–ª–∏–≥–∞—Ü–∏–π —Ö–æ—Ä–æ—à–∏–π")
        
        if bonds_pct > 60:
            advice.append("‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –æ–±–ª–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å")
        
        if positions_count < 5:
            advice.append("‚Ä¢ –£–≤–µ–ª–∏—á—å—Ç–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—é (–º–∏–Ω–∏–º—É–º 8-10 –ø–æ–∑–∏—Ü–∏–π)")
        elif positions_count > 20:
            advice.append("‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è")
        else:
            advice.append("‚Ä¢ –£—Ä–æ–≤–µ–Ω—å –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π")
        
        advice.append("‚Ä¢ –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤")
        advice.append("‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä—É–π—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å")
        
        return "\n".join(advice)


# Global instance for fallback
_fallback_ai = FallbackAI()

async def get_fallback_ai():
    """Get fallback AI instance"""
    return _fallback_ai